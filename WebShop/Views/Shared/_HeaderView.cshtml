@using System.Threading
@using Microsoft.AspNet.Identity
@using WebShop.Models.InterfacesModel
@{
    var banners = new Dictionary<int, Tuple<string, string>>()
    {
        {1,Tuple.Create("/Image/Banners/banner-fashion-men.jpg","0px")},
        {2,Tuple.Create("/Image/Banners/banner-fashion-women.jpg","-30px")}

    };
}
@*<li>@Html.RouteLink(Resource.Home, "CommonRoute", new { action = "Index", controller = "Home" }, null)</li>*@
<div class="navbar-collapse collapse">
    <ul class="nav navbar-nav">

        @foreach (var item in ((IEnumerable<ITypeCategoryModel<ICategoryModelBase>>)ViewBag.Categories))
        {
            @Html.Partial("HeaderPartial/_MenuHeaderPartial", item, new ViewDataDictionary() { { "settings", banners[item.TypeId] } })
        }

        @if (Request.IsAuthenticated && User.IsInRole("Admin"))
        {
            <li>
                @Html.ActionLink(Resource.Admin, "Index", new { action = "Index", controller = "Admin", area = "Administration" })
            </li>
        }
    </ul>

    <ul class="nav navbar-nav navbar-right">
        @if (Request.IsAuthenticated)
        {

            <li>
                @Html.ActionLink("Hello " + User.Identity.GetUserName(), "", "")
            </li>
            <li>
                @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" }))
                {
                    @Html.AntiForgeryToken()
                }
                <a href="javascript:document.getElementById('logoutForm').submit()">@Resource.LogOff</a>
            </li>
        }
        else
        {
            <li>@Html.ActionLink(Resource.LogIn, "Login", "Account")</li>
            <li>@*@Html.ActionLink(Resource.Register, "Register", "Account")*@</li>
            <li ng-controller="registerModalCtrl">
                <a class="cursor-href" ng-click="openRegisterModal()">@Resource.Register</a>
            </li>

        }
        @*Menu ICON*@
        <li class="icon-menu">
            <i class="menu-option glyphicon glyphicon-search"></i>
        </li>
        @Html.Partial("HeaderPartial/_IconHeaderPartial")
        <li class="icon-menu "><i class="menu-option glyphicon glyphicon-user"></i></li>
        <li class="icon-menu"><i class="menu-option glyphicon glyphicon-shopping-cart"></i></li>

    </ul>
</div>
<script type="text/template" id="registerTmpl">
    <div class="row row-nomargin account-modal">
        <div class="col-md-8 col-md-push-2" ng-if="!responseHandler.isSuccededRegister">
            <h2 class="text-center">@Resource.Register</h2>
            @Html.Partial("/Views/Account/Partial/_RegisterPartial.cshtml")
            <spin-wait show-when="responseHandler.isBusy" />
        </div>
        <div class="col-md-12" ng-if="responseHandler.isSuccededRegister" ng-cloak>
            <div>{{responseHandler.succesMessage}}</div>
        </div>
        <div class="col-md-12 scd-content-social">
            <ul class="list-inline list-social">
                <li class="fb">
                    @using (Html.BeginForm("ExternalLogin", "Account", new { returnUrl = Request.Url.AbsoluteUri }, FormMethod.Post, new { id = "account-submit" }))
                    {
                        @Html.AntiForgeryToken()
                        <a href="javascript:document.getElementById('sub-twitter').click()" target="_blank" >
                            <span style="background-position: 0 -41px;"></span><strong>
                                Twitter
                            </strong>
                        </a>
                        <button ng-hide="true" id="sub-twitter" class="btn rtn-primary" type="submit" name="provider" value="Twitter"></button>

                    }

                </li>
            </ul>
        </div>
    </div>
</script>
